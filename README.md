# Meta Ads Tracker - Dashboard de Vendas

Sistema de tracking para acompanhar o lucro das vendas no Meta Ads em tempo real.

## Funcionalidades

- ✅ Integração com Facebook Marketing API
- ✅ Conexão com Supabase para dados de vendas
- ✅ Dashboard em tempo real com métricas importantes
- ✅ Visualização por conta de anúncios
- ✅ Correlação entre campanhas e vendas
- ✅ Cálculo automático de ROAS e lucro

## Métricas Exibidas

- **Nome** - Nome da campanha
- **Status** - Status atual da campanha
- **Daily Budget** - Orçamento diário configurado
- **Valor Usado** - Valor gasto hoje
- **CPM** - Custo por mil impressões
- **Compras** - Número de conversões
- **CPA** - Custo por aquisição
- **Faturamento** - Receita total das vendas
- **ROAS** - Return on Ad Spend
- **Lucro** - Lucro líquido (Faturamento - Gasto - Comissões)

## Configuração

### 1. Variáveis de Ambiente

Crie um arquivo `.env.local` na raiz do projeto com as seguintes variáveis:

```env
# Facebook API Token
FB_TOKEN=seu_token_do_facebook_aqui

# Facebook Ad Account IDs
FB_AD_ACCOUNT_1=act_283711871364526
FB_AD_ACCOUNT_2=act_1398807304184031

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=sua_url_do_supabase
NEXT_PUBLIC_SUPABASE_ANON_KEY=sua_chave_anonima_do_supabase
```

### 2. Configuração do Supabase

Certifique-se de que sua tabela `vendas` está criada no Supabase:

```sql
create table
  public.vendas (
    id bigint generated by default as identity not null,
    created_at timestamp with time zone not null default now(),
    plataforma text null,
    purchase_id text null,
    product_id text null,
    cliente_name text null,
    cliente_email text null,
    cliente_number text null,
    produto text null,
    tipo text null,
    faturamento_bruto text null,
    comissao text null,
    campaign_id text null,
    adset_id text null,
    ad_id text null,
    source text null,
    constraint vendas_pkey primary key (id),
    constraint vendas_purchase_id_key unique (purchase_id)
  ) tablespace pg_default;
```

### 3. Token do Facebook

Para obter um token do Facebook:

1. Acesse o [Facebook Developers](https://developers.facebook.com/)
2. Crie um app (se ainda não tiver)
3. Vá para Graph API Explorer
4. Selecione seu app e gere um token com as permissões:
   - `ads_read`
   - `ads_management`
   - `business_management`

### 4. Instalação e Execução

```bash
# Instalar dependências
npm install

# Executar em modo de desenvolvimento
npm run dev

# Build para produção
npm run build
npm start
```

## Estrutura do Projeto

```
src/
├── app/
│   ├── api/
│   │   ├── facebook/campaigns/route.ts  # API para buscar campanhas
│   │   └── vendas/route.ts              # API para buscar vendas
│   ├── page.tsx                         # Página principal
│   └── layout.tsx                       # Layout da aplicação
├── components/
│   ├── Dashboard.tsx                    # Dashboard principal
│   ├── MetricsCard.tsx                  # Cards de métricas
│   └── CampaignsTable.tsx              # Tabela de campanhas
├── hooks/
│   └── useFacebookData.ts               # Hook para dados do Facebook
└── lib/
    └── supabase.ts                      # Configuração do Supabase
```

## Como Funciona

1. **Busca de Campanhas**: O sistema faz chamadas para a Facebook Marketing API para buscar campanhas ativas e seus insights
2. **Busca de Vendas**: Conecta com o Supabase para buscar vendas do dia atual
3. **Correlação**: Usa o `campaign_id` para correlacionar vendas com campanhas
4. **Cálculos**: Calcula métricas como ROAS, lucro e médias
5. **Exibição**: Apresenta tudo em um dashboard interativo

## Tecnologias Utilizadas

- **Next.js 15** - Framework React
- **TypeScript** - Tipagem estática
- **Tailwind CSS** - Estilização
- **Supabase** - Banco de dados
- **Facebook Marketing API** - Dados de campanhas
- **Lucide React** - Ícones

## Suporte

Para dúvidas ou problemas, verifique:

1. Se todas as variáveis de ambiente estão configuradas
2. Se o token do Facebook tem as permissões necessárias
3. Se a conexão com o Supabase está funcionando
4. Se a estrutura da tabela `vendas` está correta
